{"ast":null,"code":"import _objectSpread from\"/Users/pratikaswani/Documents/Web Application Projects/Risht Pusht/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _slicedToArray from\"/Users/pratikaswani/Documents/Web Application Projects/Risht Pusht/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useState,useContext,useEffect}from\"react\";import Categorycard from\"../Components/Categorycard\";import Upload from\"../Components/Upload\";import{AppContext}from\"../Context/Context\";import{ADD_CATEGORY,CALL_API}from\"../Context/action.types\";//APIS\nimport{addCategory,deleteCategory,editCategory,getImage}from\"../API/Category\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";var Category=function Category(){var _useContext=useContext(AppContext),state=_useContext.state,dispatch=_useContext.dispatch;var _useState=useState(null),_useState2=_slicedToArray(_useState,2),File=_useState2[0],setFile=_useState2[1];var _useState3=useState(false),_useState4=_slicedToArray(_useState3,2),Status=_useState4[0],setStatus=_useState4[1];var _useState5=useState(false),_useState6=_slicedToArray(_useState5,2),EditStatus=_useState6[0],setEditStatus=_useState6[1];var _useState7=useState(),_useState8=_slicedToArray(_useState7,2),CategoryId=_useState8[0],setCategoryId=_useState8[1];var _useState9=useState({name:\"\",have_sub:true,image_url:\"\",description:\"\"}),_useState10=_slicedToArray(_useState9,2),formdata=_useState10[0],setFormData=_useState10[1];var setNameValue=function setNameValue(e){setFormData(_objectSpread(_objectSpread({},formdata),{},{name:e.target.value}));};var setDescriptionValue=function setDescriptionValue(e){setFormData(_objectSpread(_objectSpread({},formdata),{},{description:e.target.value}));};var setFileHandler=function setFileHandler(e){setFile(e.target.files[0]);};var EditHandler=function EditHandler(id,name,img,description){setEditStatus(!EditStatus);setCategoryId(id);setFormData(_objectSpread(_objectSpread({},formdata),{},{name:name,description:description,image_url:img}));window.scrollTo(0,0);};if(File){var image=new FormData();image.append(\"file\",File);getImage(image).then(function(response){setFormData(_objectSpread(_objectSpread({},formdata),{},{image_url:response.url}));alert(\"Image Uploaded Successfully..\");});setFile(null);}var onDelete=function onDelete(key){deleteCategory(key).then(function(response){if(response){setStatus(!Status);}else{alert(\"Deleted UnSuccessfull\");}});};console.log(formdata);var handleForm=function handleForm(e){e.preventDefault();if(!EditStatus){addCategory(formdata).then(function(response){if(response.err){return alert(\"Failed to Add Category...\");}else{alert(\"Category Added Successfully!\");}});}else{editCategory({cid:CategoryId,name:formdata.name,image_url:formdata.image_url,description:formdata.description}).then(function(response){if(response.err){alert(\"Failed to upload category\");}else{alert(\"Category Edited Successfully\");}});}setFormData(_objectSpread(_objectSpread({},formdata),{},{name:\"\",description:\"\",image_url:\"\"}));setEditStatus(!EditStatus);setStatus(!Status);};useEffect(function(){dispatch({type:CALL_API});},[Status]);return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h1\",{className:\"bold-text\",children:EditStatus?\"Edit Category\":\"Add Category\"}),/*#__PURE__*/_jsx(\"div\",{className:\"add-category\",children:/*#__PURE__*/_jsx(Upload,{add:EditStatus?\"Edit Name\":\"Add Name\",name:formdata.name,descrp:formdata.description,des:EditStatus?\"Edit Description\":\"Add Description\",setName:setNameValue,setDescription:setDescriptionValue,setFileHandler:setFileHandler,pname:EditStatus?\"Edit Category\":\"Add Category\",handleForm:handleForm})}),state.Categories.Categories?/*#__PURE__*/_jsx(_Fragment,{children:/*#__PURE__*/_jsxs(\"div\",{className:\"modify-delete\",style:{marginTop:\"120px\"},children:[/*#__PURE__*/_jsx(\"h1\",{className:\"bold-text\",children:\"MODIFY/DELETE CATEGORY\"}),/*#__PURE__*/_jsx(\"div\",{className:\"row g-4 text-center\",children:state.Categories.Categories?state.Categories.Categories.map(function(category,index){return/*#__PURE__*/_jsx(\"div\",{className:\"col-md-2\",children:/*#__PURE__*/_jsx(Categorycard,{categoryid:category.cid,onDelete:onDelete,name:category.name,img:category.url,EditHandler:EditHandler,Description:category.description})},index);}):\"\"})]})}):/*#__PURE__*/_jsx(\"h2\",{className:\"mt-5 text-center\",style:{marginTop:\"100px\"},children:\"No Categories\"})]});};export default Category;","map":{"version":3,"sources":["/Users/pratikaswani/Documents/Web Application Projects/Risht Pusht/src/Pages/Category.js"],"names":["React","useState","useContext","useEffect","Categorycard","Upload","AppContext","ADD_CATEGORY","CALL_API","addCategory","deleteCategory","editCategory","getImage","Category","state","dispatch","File","setFile","Status","setStatus","EditStatus","setEditStatus","CategoryId","setCategoryId","name","have_sub","image_url","description","formdata","setFormData","setNameValue","e","target","value","setDescriptionValue","setFileHandler","files","EditHandler","id","img","window","scrollTo","image","FormData","append","then","response","url","alert","onDelete","key","console","log","handleForm","preventDefault","err","cid","type","Categories","marginTop","map","category","index"],"mappings":"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","sourcesContent":["import React, { useState, useContext, useEffect } from \"react\";\n\nimport Categorycard from \"../Components/Categorycard\";\nimport Upload from \"../Components/Upload\";\n\nimport { AppContext } from \"../Context/Context\";\nimport { ADD_CATEGORY, CALL_API } from \"../Context/action.types\";\n\n//APIS\nimport {\n  addCategory,\n  deleteCategory,\n  editCategory,\n  getImage,\n} from \"../API/Category\";\n\nconst Category = () => {\n  const { state, dispatch } = useContext(AppContext);\n\n  const [File, setFile] = useState(null);\n  const [Status, setStatus] = useState(false);\n  const [EditStatus, setEditStatus] = useState(false);\n  const [CategoryId, setCategoryId] = useState();\n\n  const [formdata, setFormData] = useState({\n    name: \"\",\n    have_sub: true,\n    image_url: \"\",\n    description: \"\",\n  });\n\n  const setNameValue = (e) => {\n    setFormData({ ...formdata, name: e.target.value });\n  };\n\n  const setDescriptionValue = (e) => {\n    setFormData({ ...formdata, description: e.target.value });\n  };\n\n  const setFileHandler = (e) => {\n    setFile(e.target.files[0]);\n  };\n\n  const EditHandler = (id, name, img, description) => {\n    setEditStatus(!EditStatus);\n    setCategoryId(id);\n    setFormData({\n      ...formdata,\n      name: name,\n      description: description,\n      image_url: img,\n    });\n    window.scrollTo(0, 0);\n  };\n\n  if (File) {\n    const image = new FormData();\n\n    image.append(\"file\", File);\n\n    getImage(image).then((response) => {\n      setFormData({\n        ...formdata,\n        image_url: response.url,\n      });\n      alert(\"Image Uploaded Successfully..\");\n    });\n\n    setFile(null);\n  }\n\n  const onDelete = (key) => {\n    deleteCategory(key).then((response) => {\n      if (response) {\n        setStatus(!Status);\n      } else {\n        alert(\"Deleted UnSuccessfull\");\n      }\n    });\n  };\n\n  console.log(formdata);\n\n  const handleForm = (e) => {\n    e.preventDefault();\n\n    if (!EditStatus) {\n      addCategory(formdata).then((response) => {\n        if (response.err) {\n          return alert(\"Failed to Add Category...\");\n        } else {\n          alert(\"Category Added Successfully!\");\n        }\n      });\n    } else {\n      editCategory({\n        cid: CategoryId,\n        name: formdata.name,\n        image_url: formdata.image_url,\n        description: formdata.description,\n      }).then((response) => {\n        if (response.err) {\n          alert(\"Failed to upload category\");\n        } else {\n          alert(\"Category Edited Successfully\");\n        }\n      });\n    }\n\n    setFormData({\n      ...formdata,\n      name: \"\",\n      description: \"\",\n      image_url: \"\",\n    });\n    setEditStatus(!EditStatus);\n    setStatus(!Status);\n  };\n\n  useEffect(() => {\n    dispatch({ type: CALL_API });\n  }, [Status]);\n\n  return (\n    <div>\n      <h1 className=\"bold-text\">\n        {EditStatus ? \"Edit Category\" : \"Add Category\"}\n      </h1>\n      <div className=\"add-category\">\n        <Upload\n          add={EditStatus ? \"Edit Name\" : \"Add Name\"}\n          name={formdata.name}\n          descrp={formdata.description}\n          des={EditStatus ? \"Edit Description\" : \"Add Description\"}\n          setName={setNameValue}\n          setDescription={setDescriptionValue}\n          setFileHandler={setFileHandler}\n          pname={EditStatus ? \"Edit Category\" : \"Add Category\"}\n          handleForm={handleForm}\n        />\n      </div>\n      {state.Categories.Categories ? (\n        <>\n          <div className=\"modify-delete\" style={{ marginTop: \"120px\" }}>\n            <h1 className=\"bold-text\">MODIFY/DELETE CATEGORY</h1>\n            <div className=\"row g-4 text-center\">\n              {state.Categories.Categories\n                ? state.Categories.Categories.map((category, index) => (\n                    <div className=\"col-md-2\" key={index}>\n                      <Categorycard\n                        categoryid={category.cid}\n                        onDelete={onDelete}\n                        name={category.name}\n                        img={category.url}\n                        EditHandler={EditHandler}\n                        Description={category.description}\n                      />\n                    </div>\n                  ))\n                : \"\"}\n            </div>\n          </div>\n        </>\n      ) : (\n        <h2 className=\"mt-5 text-center\" style={{ marginTop: \"100px\" }}>\n          No Categories\n        </h2>\n      )}\n    </div>\n  );\n};\n\nexport default Category;\n"]},"metadata":{},"sourceType":"module"}