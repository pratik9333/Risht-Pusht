{"ast":null,"code":"import _objectSpread from\"/Users/pratikaswani/Documents/Web Application Projects/Risht Pusht/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _slicedToArray from\"/Users/pratikaswani/Documents/Web Application Projects/Risht Pusht/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useState,useContext,useEffect}from\"react\";import Categorycard from\"../Components/Categorycard\";import Upload from\"../Components/Upload\";import{AppContext}from\"../Context/Context\";import{ADD_SUBCATEGORY}from\"../Context/action.types\";//APIS\nimport{addSubCategory,getAllSubCategory,deleteSubCategory,getImage,editSubCategory}from\"../API/Category\";import{useParams}from\"react-router\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";var SubCategory=function SubCategory(){var _useParams=useParams(),categoryid=_useParams.categoryid;var _useContext=useContext(AppContext),state=_useContext.state,dispatch=_useContext.dispatch;var _useState=useState(null),_useState2=_slicedToArray(_useState,2),File=_useState2[0],setFile=_useState2[1];var _useState3=useState(false),_useState4=_slicedToArray(_useState3,2),Status=_useState4[0],setStatus=_useState4[1];var _useState5=useState(false),_useState6=_slicedToArray(_useState5,2),EditStatus=_useState6[0],setEditStatus=_useState6[1];var _useState7=useState({name:\"\",cid:categoryid,scid:\"\",image_url:\"\"}),_useState8=_slicedToArray(_useState7,2),formdata=_useState8[0],setFormData=_useState8[1];var setNameValue=function setNameValue(e){setFormData(_objectSpread(_objectSpread({},formdata),{},{name:e.target.value}));};console.log(formdata);var setFileHandler=function setFileHandler(e){setFile(e.target.files[0]);};var EditHandler=function EditHandler(id,name,img){setEditStatus(!EditStatus);setFormData(_objectSpread(_objectSpread({},formdata),{},{scid:id,name:name,image_url:img}));window.scrollTo(0,0);};if(File){var image=new FormData();image.append(\"file\",File);getImage(image).then(function(response){setFormData(_objectSpread(_objectSpread({},formdata),{},{image_url:response.url}));alert(\"Image Uploaded Successfully..\");});setFile(null);}var onDelete=function onDelete(key){console.log(key);deleteSubCategory(key).then(function(response){if(response){console.log(response);setStatus(!Status);}else{alert(\"Deleted Successfull\");}});};var handleForm=function handleForm(e){e.preventDefault();if(!EditStatus){addSubCategory({name:formdata.name,cid:formdata.cid,image_url:formdata.image_url}).then(function(response){if(response.err){return alert(\"Failed to Add Category...\");}else{alert(\"SubCategory Added Successfully!\");}});}else{editSubCategory({scid:formdata.scid,name:formdata.name,image_url:formdata.image_url}).then(function(response){if(response.err){alert(\"Failed to upload category\");}else{alert(\"SubCategory Edited Successfully\");}});}setFormData(_objectSpread(_objectSpread({},formdata),{},{name:\"\",description:\"\",image_url:\"\"}));setStatus(!Status);setEditStatus(!EditStatus);};useEffect(function(){//getAllSubCategory\ngetAllSubCategory(formdata.cid).then(function(response){if(response.err){return alert(\"Cannot Fetch Categories\");}else{dispatch({type:ADD_SUBCATEGORY,payload:response});}});},[Status]);return/*#__PURE__*/_jsx(\"div\",{children:true?/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"h1\",{className:\"bold-text\",children:EditStatus?\"Edit SubCategory\":\"Add SubCategory\"}),/*#__PURE__*/_jsx(\"div\",{className:\"add-category\",children:/*#__PURE__*/_jsx(Upload,{add:EditStatus?\"Edit Name\":\"Add Name\",name:formdata.name,setName:setNameValue,setFileHandler:setFileHandler,pname:EditStatus?\"Edit Sub Category\":\"Add Sub Category\",handleForm:handleForm})}),/*#__PURE__*/_jsxs(\"div\",{className:\"modify-delete\",style:{marginTop:\"120px\"},children:[/*#__PURE__*/_jsx(\"h1\",{className:\"bold-text\",children:\"MODIFY/DELETE SUBCATEGORY\"}),/*#__PURE__*/_jsx(\"div\",{className:\"row g-4 text-center\",children:state.SubCategories.Sub_Categories?state.SubCategories.Sub_Categories.map(function(category,index){return/*#__PURE__*/_jsx(\"div\",{className:\"col-md-2\",children:/*#__PURE__*/_jsx(Categorycard,{categoryid:category.scid,onDelete:onDelete,name:category.name,img:category.url,EditHandler:EditHandler})},index);}):\"\"})]})]}):\"Loading....\"});};export default SubCategory;","map":{"version":3,"sources":["/Users/pratikaswani/Documents/Web Application Projects/Risht Pusht/src/Pages/SubCategory.js"],"names":["React","useState","useContext","useEffect","Categorycard","Upload","AppContext","ADD_SUBCATEGORY","addSubCategory","getAllSubCategory","deleteSubCategory","getImage","editSubCategory","useParams","SubCategory","categoryid","state","dispatch","File","setFile","Status","setStatus","EditStatus","setEditStatus","name","cid","scid","image_url","formdata","setFormData","setNameValue","e","target","value","console","log","setFileHandler","files","EditHandler","id","img","window","scrollTo","image","FormData","append","then","response","url","alert","onDelete","key","handleForm","preventDefault","err","description","type","payload","marginTop","SubCategories","Sub_Categories","map","category","index"],"mappings":"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","sourcesContent":["import React, { useState, useContext, useEffect } from \"react\";\n\nimport Categorycard from \"../Components/Categorycard\";\n\nimport Upload from \"../Components/Upload\";\n\nimport { AppContext } from \"../Context/Context\";\nimport { ADD_SUBCATEGORY } from \"../Context/action.types\";\n\n//APIS\nimport {\n  addSubCategory,\n  getAllSubCategory,\n  deleteSubCategory,\n  getImage,\n  editSubCategory,\n} from \"../API/Category\";\nimport { useParams } from \"react-router\";\n\nconst SubCategory = () => {\n  const { categoryid } = useParams();\n  const { state, dispatch } = useContext(AppContext);\n  const [File, setFile] = useState(null);\n  const [Status, setStatus] = useState(false);\n  const [EditStatus, setEditStatus] = useState(false);\n\n  const [formdata, setFormData] = useState({\n    name: \"\",\n    cid: categoryid,\n    scid: \"\",\n    image_url: \"\",\n  });\n\n  const setNameValue = (e) => {\n    setFormData({ ...formdata, name: e.target.value });\n  };\n\n  console.log(formdata);\n\n  const setFileHandler = (e) => {\n    setFile(e.target.files[0]);\n  };\n\n  const EditHandler = (id, name, img) => {\n    setEditStatus(!EditStatus);\n    setFormData({\n      ...formdata,\n      scid: id,\n      name: name,\n      image_url: img,\n    });\n    window.scrollTo(0, 0);\n  };\n\n  if (File) {\n    const image = new FormData();\n\n    image.append(\"file\", File);\n\n    getImage(image).then((response) => {\n      setFormData({\n        ...formdata,\n        image_url: response.url,\n      });\n      alert(\"Image Uploaded Successfully..\");\n    });\n\n    setFile(null);\n  }\n\n  const onDelete = (key) => {\n    console.log(key);\n    deleteSubCategory(key).then((response) => {\n      if (response) {\n        console.log(response);\n        setStatus(!Status);\n      } else {\n        alert(\"Deleted Successfull\");\n      }\n    });\n  };\n\n  const handleForm = (e) => {\n    e.preventDefault();\n\n    if (!EditStatus) {\n      addSubCategory({\n        name: formdata.name,\n        cid: formdata.cid,\n        image_url: formdata.image_url,\n      }).then((response) => {\n        if (response.err) {\n          return alert(\"Failed to Add Category...\");\n        } else {\n          alert(\"SubCategory Added Successfully!\");\n        }\n      });\n    } else {\n      editSubCategory({\n        scid: formdata.scid,\n        name: formdata.name,\n        image_url: formdata.image_url,\n      }).then((response) => {\n        if (response.err) {\n          alert(\"Failed to upload category\");\n        } else {\n          alert(\"SubCategory Edited Successfully\");\n        }\n      });\n    }\n\n    setFormData({\n      ...formdata,\n      name: \"\",\n      description: \"\",\n      image_url: \"\",\n    });\n    setStatus(!Status);\n    setEditStatus(!EditStatus);\n  };\n\n  useEffect(() => {\n    //getAllSubCategory\n    getAllSubCategory(formdata.cid).then((response) => {\n      if (response.err) {\n        return alert(\"Cannot Fetch Categories\");\n      } else {\n        dispatch({ type: ADD_SUBCATEGORY, payload: response });\n      }\n    });\n  }, [Status]);\n\n  return (\n    <div>\n      {true ? (\n        <>\n          <h1 className=\"bold-text\">\n            {EditStatus ? \"Edit SubCategory\" : \"Add SubCategory\"}\n          </h1>\n          <div className=\"add-category\">\n            <Upload\n              add={EditStatus ? \"Edit Name\" : \"Add Name\"}\n              name={formdata.name}\n              setName={setNameValue}\n              setFileHandler={setFileHandler}\n              pname={EditStatus ? \"Edit Sub Category\" : \"Add Sub Category\"}\n              handleForm={handleForm}\n            />\n          </div>\n          <div className=\"modify-delete\" style={{ marginTop: \"120px\" }}>\n            <h1 className=\"bold-text\">MODIFY/DELETE SUBCATEGORY</h1>\n            <div className=\"row g-4 text-center\">\n              {state.SubCategories.Sub_Categories\n                ? state.SubCategories.Sub_Categories.map((category, index) => (\n                    <div className=\"col-md-2\" key={index}>\n                      <Categorycard\n                        categoryid={category.scid}\n                        onDelete={onDelete}\n                        name={category.name}\n                        img={category.url}\n                        EditHandler={EditHandler}\n                      />\n                    </div>\n                  ))\n                : \"\"}\n            </div>\n          </div>\n        </>\n      ) : (\n        \"Loading....\"\n      )}\n    </div>\n  );\n};\n\nexport default SubCategory;\n"]},"metadata":{},"sourceType":"module"}