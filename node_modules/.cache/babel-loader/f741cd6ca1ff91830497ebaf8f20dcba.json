{"ast":null,"code":"import _objectSpread from\"/Users/pratikaswani/Documents/Web Application Projects/Risht Pusht/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _slicedToArray from\"/Users/pratikaswani/Documents/Web Application Projects/Risht Pusht/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useState,useEffect,useContext}from\"react\";//components\nimport Upload from\"../Components/Upload\";import Categorycard from\"../Components/Categorycard\";//image\nimport bgimg from\"../Assets/Images/bgimage.png\";import{AppContext}from\"../Context/Context\";//API\nimport{getImage}from\"../API/Category\";import{CALL_API}from\"../Context/action.types\";import{addProduct,deleteProduct,editProduct}from\"../API/Product\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var Item=function Item(){var _useContext=useContext(AppContext),state=_useContext.state,dispatch=_useContext.dispatch;var _useState=useState(null),_useState2=_slicedToArray(_useState,2),File=_useState2[0],setFile=_useState2[1];var _useState3=useState(false),_useState4=_slicedToArray(_useState3,2),Status=_useState4[0],setStatus=_useState4[1];var _useState5=useState(false),_useState6=_slicedToArray(_useState5,2),EditStatus=_useState6[0],setEditStatus=_useState6[1];var _useState7=useState(),_useState8=_slicedToArray(_useState7,2),ProductId=_useState8[0],setProductId=_useState8[1];var _useState9=useState({cid:\"\",scid:\"\",name:\"\",image_url:\"\",price:\"\",in_stock:true,short_description:\"\",description:\"\"}),_useState10=_slicedToArray(_useState9,2),formdata=_useState10[0],setFormData=_useState10[1];console.log(formdata);var setNameValue=function setNameValue(e){setFormData(_objectSpread(_objectSpread({},formdata),{},{name:e.target.value}));};var setDescriptionValue=function setDescriptionValue(e){setFormData(_objectSpread(_objectSpread({},formdata),{},{description:e.target.value}));};var setShortDescriptionValue=function setShortDescriptionValue(e){setFormData(_objectSpread(_objectSpread({},formdata),{},{short_description:e.target.value}));};var setCategoryId=function setCategoryId(e){console.log(e.target.value);setFormData(_objectSpread(_objectSpread({},formdata),{},{cid:e.target.value}));};var setSubCatId=function setSubCatId(e){setFormData(_objectSpread(_objectSpread({},formdata),{},{scid:e.target.value}));};var setPriceForm=function setPriceForm(e){setFormData(_objectSpread(_objectSpread({},formdata),{},{price:e.target.value}));};var setFileHandler=function setFileHandler(e){setFile(e.target.files[0]);};var handleForm=function handleForm(e){e.preventDefault();if(!EditStatus){addProduct(formdata).then(function(response){if(response.err){console.log(response.err);}else{alert(\"Product Added Successfully\");}});}else{editProduct({pid:ProductId,name:formdata.name,image_url:formdata.image_url,price:formdata.price,in_stock:true,short_description:formdata.short_description,description:formdata.description}).then(function(response){if(response.err){alert(\"Failed to upload category\");}else{alert(\"Product Edited Successfully\");}});}setFormData(_objectSpread(_objectSpread({},formdata),{},{cid:\"\",scid:\"\",name:\"\",image_url:\"\",price:\"\",in_stock:true,short_description:\"\",description:\"\"}));setProductId(null);setStatus(!Status);setEditStatus(!EditStatus);};var EditHandler=function EditHandler(id,name,img,description,sd,price){setEditStatus(!EditStatus);setProductId(id);setFormData(_objectSpread(_objectSpread({},formdata),{},{name:name,description:description,short_description:sd,price:price,image_url:img}));window.scrollTo(0,0);};var onDelete=function onDelete(key){console.log(key);deleteProduct(key).then(function(response){if(response){setStatus(!Status);}else{alert(\"Deleted UnSuccessfull\");}});};if(File){var image=new FormData();image.append(\"file\",File);getImage(image).then(function(response){setFormData(_objectSpread(_objectSpread({},formdata),{},{image_url:response.url}));alert(\"Image Uploaded Successfully..\");});setFile(null);}useEffect(function(){dispatch({type:CALL_API});},[Status]);return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h1\",{className:\"bold-text\",children:!EditStatus?\"Add Item\":\"Update Item\"}),/*#__PURE__*/_jsx(\"div\",{className:\"add-item\",children:/*#__PURE__*/_jsx(Upload,{add:\"Add Product\",des:\"Item Description\",name:formdata.name,price:formdata.price,descrp:formdata.description,shortdes:formdata.short_description,setName:setNameValue,setDescription:setDescriptionValue,setShortDescription:setShortDescriptionValue,setCategoryId:setCategoryId,setSubCatId:setSubCatId,setPriceForm:setPriceForm,setFileHandler:setFileHandler,handleForm:handleForm,Categories:state})}),/*#__PURE__*/_jsxs(\"div\",{className:\"modify-delete\",style:{marginTop:\"120px\"},children:[/*#__PURE__*/_jsx(\"h1\",{className:\"bold-text\",children:\"MODIFY/DELETE ITEM\"}),/*#__PURE__*/_jsx(\"div\",{className:\"row g-4 text-center\",children:state.Products.Products?state.Products.Products.map(function(category,index){return/*#__PURE__*/_jsx(\"div\",{className:\"col-md-2\",children:/*#__PURE__*/_jsx(Categorycard,{categoryid:category.pid,onDelete:onDelete,name:category.name,img:category.image_url,Description:category.description,short_description:category.short_description,price:category.price,EditHandler:EditHandler})},index);}):\"\"})]})]});};export default Item;","map":{"version":3,"sources":["/Users/pratikaswani/Documents/Web Application Projects/Risht Pusht/src/Pages/Item.js"],"names":["React","useState","useEffect","useContext","Upload","Categorycard","bgimg","AppContext","getImage","CALL_API","addProduct","deleteProduct","editProduct","Item","state","dispatch","File","setFile","Status","setStatus","EditStatus","setEditStatus","ProductId","setProductId","cid","scid","name","image_url","price","in_stock","short_description","description","formdata","setFormData","console","log","setNameValue","e","target","value","setDescriptionValue","setShortDescriptionValue","setCategoryId","setSubCatId","setPriceForm","setFileHandler","files","handleForm","preventDefault","then","response","err","alert","pid","EditHandler","id","img","sd","window","scrollTo","onDelete","key","image","FormData","append","url","type","marginTop","Products","map","category","index"],"mappings":"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","sourcesContent":["import React, { useState, useEffect, useContext } from \"react\";\n\n//components\nimport Upload from \"../Components/Upload\";\nimport Categorycard from \"../Components/Categorycard\";\n\n//image\nimport bgimg from \"../Assets/Images/bgimage.png\";\n\nimport { AppContext } from \"../Context/Context\";\n\n//API\nimport { getImage } from \"../API/Category\";\nimport { CALL_API } from \"../Context/action.types\";\nimport { addProduct, deleteProduct, editProduct } from \"../API/Product\";\n\nconst Item = () => {\n  const { state, dispatch } = useContext(AppContext);\n\n  const [File, setFile] = useState(null);\n  const [Status, setStatus] = useState(false);\n  const [EditStatus, setEditStatus] = useState(false);\n  const [ProductId, setProductId] = useState();\n\n  const [formdata, setFormData] = useState({\n    cid: \"\",\n    scid: \"\",\n    name: \"\",\n    image_url: \"\",\n    price: \"\",\n    in_stock: true,\n    short_description: \"\",\n    description: \"\",\n  });\n\n  console.log(formdata);\n\n  const setNameValue = (e) => {\n    setFormData({ ...formdata, name: e.target.value });\n  };\n\n  const setDescriptionValue = (e) => {\n    setFormData({ ...formdata, description: e.target.value });\n  };\n\n  const setShortDescriptionValue = (e) => {\n    setFormData({ ...formdata, short_description: e.target.value });\n  };\n\n  const setCategoryId = (e) => {\n    console.log(e.target.value);\n    setFormData({ ...formdata, cid: e.target.value });\n  };\n\n  const setSubCatId = (e) => {\n    setFormData({ ...formdata, scid: e.target.value });\n  };\n\n  const setPriceForm = (e) => {\n    setFormData({ ...formdata, price: e.target.value });\n  };\n\n  const setFileHandler = (e) => {\n    setFile(e.target.files[0]);\n  };\n\n  const handleForm = (e) => {\n    e.preventDefault();\n\n    if (!EditStatus) {\n      addProduct(formdata).then((response) => {\n        if (response.err) {\n          console.log(response.err);\n        } else {\n          alert(\"Product Added Successfully\");\n        }\n      });\n    } else {\n      editProduct({\n        pid: ProductId,\n        name: formdata.name,\n        image_url: formdata.image_url,\n        price: formdata.price,\n        in_stock: true,\n        short_description: formdata.short_description,\n        description: formdata.description,\n      }).then((response) => {\n        if (response.err) {\n          alert(\"Failed to upload category\");\n        } else {\n          alert(\"Product Edited Successfully\");\n        }\n      });\n    }\n\n    setFormData({\n      ...formdata,\n      cid: \"\",\n      scid: \"\",\n      name: \"\",\n      image_url: \"\",\n      price: \"\",\n      in_stock: true,\n      short_description: \"\",\n      description: \"\",\n    });\n\n    setProductId(null);\n    setStatus(!Status);\n    setEditStatus(!EditStatus);\n  };\n\n  const EditHandler = (id, name, img, description, sd, price) => {\n    setEditStatus(!EditStatus);\n    setProductId(id);\n    setFormData({\n      ...formdata,\n      name: name,\n      description: description,\n      short_description: sd,\n      price: price,\n      image_url: img,\n    });\n    window.scrollTo(0, 0);\n  };\n\n  const onDelete = (key) => {\n    console.log(key);\n    deleteProduct(key).then((response) => {\n      if (response) {\n        setStatus(!Status);\n      } else {\n        alert(\"Deleted UnSuccessfull\");\n      }\n    });\n  };\n\n  if (File) {\n    const image = new FormData();\n\n    image.append(\"file\", File);\n\n    getImage(image).then((response) => {\n      setFormData({\n        ...formdata,\n        image_url: response.url,\n      });\n      alert(\"Image Uploaded Successfully..\");\n    });\n\n    setFile(null);\n  }\n\n  useEffect(() => {\n    dispatch({ type: CALL_API });\n  }, [Status]);\n\n  return (\n    <div>\n      <h1 className=\"bold-text\">{!EditStatus ? \"Add Item\" : \"Update Item\"}</h1>\n      <div className=\"add-item\">\n        <Upload\n          add=\"Add Product\"\n          des=\"Item Description\"\n          name={formdata.name}\n          price={formdata.price}\n          descrp={formdata.description}\n          shortdes={formdata.short_description}\n          setName={setNameValue}\n          setDescription={setDescriptionValue}\n          setShortDescription={setShortDescriptionValue}\n          setCategoryId={setCategoryId}\n          setSubCatId={setSubCatId}\n          setPriceForm={setPriceForm}\n          setFileHandler={setFileHandler}\n          handleForm={handleForm}\n          Categories={state}\n        />\n      </div>\n      <div className=\"modify-delete\" style={{ marginTop: \"120px\" }}>\n        <h1 className=\"bold-text\">MODIFY/DELETE ITEM</h1>\n        <div className=\"row g-4 text-center\">\n          {state.Products.Products\n            ? state.Products.Products.map((category, index) => (\n                <div className=\"col-md-2\" key={index}>\n                  <Categorycard\n                    categoryid={category.pid}\n                    onDelete={onDelete}\n                    name={category.name}\n                    img={category.image_url}\n                    Description={category.description}\n                    short_description={category.short_description}\n                    price={category.price}\n                    EditHandler={EditHandler}\n                  />\n                </div>\n              ))\n            : \"\"}\n        </div>\n      </div>\n    </div>\n  );\n};\n\nexport default Item;\n"]},"metadata":{},"sourceType":"module"}